<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Add column of headlines — add_headline_column • headliner</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Add column of headlines — add_headline_column"><meta property="og:description" content="This works similar to headline() but acts on and returns a
data frame."><meta property="og:image" content="/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">headliner</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/intro.html">Introduction to headliner</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/rjake/headliner/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Add column of headlines</h1>
    <small class="dont-index">Source: <a href="https://github.com/rjake/headliner/blob/HEAD/R/add-headline-column.R" class="external-link"><code>R/add-headline-column.R</code></a></small>
    <div class="hidden name"><code>add_headline_column.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This works similar to <code><a href="headline.html">headline()</a></code> but acts on and returns a
data frame.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">add_headline_column</span><span class="op">(</span>
  <span class="va">df</span>,
  <span class="va">x</span>,
  <span class="va">y</span>,
  headline <span class="op">=</span> <span class="st">"{trend} of {delta} ({orig_values})"</span>,
  <span class="va">...</span>,
  .name <span class="op">=</span> <span class="st">"headline"</span>,
  if_match <span class="op">=</span> <span class="st">"There was no difference."</span>,
  trend_phrases <span class="op">=</span> <span class="fu">headliner</span><span class="fu">::</span><span class="fu"><a href="trend_terms.html">trend_terms</a></span><span class="op">(</span><span class="op">)</span>,
  plural_phrases <span class="op">=</span> <span class="cn">NULL</span>,
  orig_values <span class="op">=</span> <span class="st">"{x} vs. {y}"</span>,
  n_decimal <span class="op">=</span> <span class="fl">1</span>,
  round_all <span class="op">=</span> <span class="cn">TRUE</span>,
  multiplier <span class="op">=</span> <span class="fl">1</span>,
  return_cols <span class="op">=</span> <span class="va">.name</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>df</dt>
<dd><p>data frame, must be a single row</p></dd>
<dt>x</dt>
<dd><p>a numeric value to compare to the reference value of 'y'</p></dd>
<dt>y</dt>
<dd><p>a numeric value to act as a control for the 'x' value</p></dd>
<dt>headline</dt>
<dd><p>a string to format the final output. Uses
<code><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></code> syntax</p></dd>
<dt>...</dt>
<dd><p>arguments passed to <code><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue_data</a></code></p></dd>
<dt>.name</dt>
<dd><p>string value for the name of the new column to create</p></dd>
<dt>if_match</dt>
<dd><p>string to display if numbers match, uses
<code><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></code> syntax</p></dd>
<dt>trend_phrases</dt>
<dd><p>list of values to use for when y is more than x, y is the
same as x, or y is less than x. You can pass it just
<code><a href="trend_terms.html">trend_terms</a></code> (the default) and call the result with
<code>"...{trend}..."</code> or pass is a named list (see examples)</p></dd>
<dt>plural_phrases</dt>
<dd><p>named list of values to use when difference (delta) is
singular (delta = 1) or plural (delta != 1)</p></dd>
<dt>orig_values</dt>
<dd><p>a string using <code><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></code> syntax.
example: <code>({x} vs {y})</code></p></dd>
<dt>n_decimal</dt>
<dd><p>numeric value to limit the number of decimal places in
the returned values.</p></dd>
<dt>round_all</dt>
<dd><p>logical value to indicate if all values should be rounded.
When FALSE, the values will return with no modification. When TRUE (default)
all values will be round to the length specified by 'n_decimal'.</p></dd>
<dt>multiplier</dt>
<dd><p>number indicating the scaling factor. When multiplier = 1
(default), 0.25 will return 0.25. When multiplier = 100, 0.25 will return 25.</p></dd>
<dt>return_cols</dt>
<dd><p>arguments that can be passed to
<code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></code>, ex: c("a", "b"),
<code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></code>, etc.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>Returns the original data frame with columns appended.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>What is nice about this function is you can return some of the
"talking points" used in the headline calculation. For example, if you want
to find the most extreme headlines, you can use
<code>add_headline_column(..., return_cols = delta)</code> This will bring back a
<code>headline</code> column as well as the <code>delta</code> talking point (the absolute
difference between <code>x</code> and <code>y</code>). With this result, you can sort in descending
order and filter for the biggest difference.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"></span>
<span class="r-in"><span class="co"># You can use 'add_headline_column()' to reference values in an existing data set.</span></span>
<span class="r-in"><span class="co"># Here is an example comparing the box office sales of different Pixar films</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">pixar_films</span><span class="op">)</span> |&gt;</span>
<span class="r-in">  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">film</span>, <span class="va">bo_domestic</span>, <span class="va">bo_intl</span><span class="op">)</span> |&gt;</span>
<span class="r-in">  <span class="fu">add_headline_column</span><span class="op">(</span></span>
<span class="r-in">    x <span class="op">=</span> <span class="va">bo_domestic</span>,</span>
<span class="r-in">    y <span class="op">=</span> <span class="va">bo_intl</span>,</span>
<span class="r-in">    headline <span class="op">=</span> <span class="st">"{film} was ${delta}M higher {trend} (${x}M vs ${y}M)"</span>,</span>
<span class="r-in">    trend_phrases <span class="op">=</span> <span class="fu"><a href="trend_terms.html">trend_terms</a></span><span class="op">(</span>more <span class="op">=</span> <span class="st">"domestically"</span>, less <span class="op">=</span> <span class="st">"internationally"</span><span class="op">)</span></span>
<span class="r-in">  <span class="op">)</span> |&gt;</span>
<span class="r-in">  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="st">"pandoc"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> film               bo_domestic   bo_intl  headline                                                                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ----------------  ------------  --------  ------------------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Toy Story                191.8     181.8  Toy Story was $10M higher domestically ($191.8M vs $181.8M)             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A Bug's Life             162.8     200.5  A Bug's Life was $37.7M higher internationally ($162.8M vs $200.5M)     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Toy Story 2              245.9     251.5  Toy Story 2 was $5.6M higher internationally ($245.9M vs $251.5M)       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Monsters, Inc.           289.9     342.4  Monsters, Inc. was $52.5M higher internationally ($289.9M vs $342.4M)   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Finding Nemo             339.7     531.3  Finding Nemo was $191.6M higher internationally ($339.7M vs $531.3M)    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The Incredibles          261.4     370.2  The Incredibles was $108.8M higher internationally ($261.4M vs $370.2M) </span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># You can also use 'return_cols' to return any and all "talking points".</span></span>
<span class="r-in"><span class="co"># You can use tidyselect helpers like 'starts_with("delta")' or</span></span>
<span class="r-in"><span class="co"># 'everything()'. In this example, I returned the 'raw_delta' &amp; 'trend' columns</span></span>
<span class="r-in"><span class="co"># and then identified the records at the extremes</span></span>
<span class="r-in"><span class="va">pixar_films</span> |&gt;</span>
<span class="r-in">  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">film</span>, <span class="va">bo_domestic</span>, <span class="va">bo_intl</span><span class="op">)</span> |&gt;</span>
<span class="r-in">  <span class="fu">add_headline_column</span><span class="op">(</span></span>
<span class="r-in">    x <span class="op">=</span> <span class="va">bo_domestic</span>,</span>
<span class="r-in">    y <span class="op">=</span> <span class="va">bo_intl</span>,</span>
<span class="r-in">    headline <span class="op">=</span> <span class="st">"${delta}M {trend} (${x}M vs ${y}M)"</span>,</span>
<span class="r-in">    trend_phrases <span class="op">=</span> <span class="fu"><a href="trend_terms.html">trend_terms</a></span><span class="op">(</span>more <span class="op">=</span> <span class="st">"higher"</span>, less <span class="op">=</span> <span class="st">"lower"</span><span class="op">)</span>,</span>
<span class="r-in">    return_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">raw_delta</span>, <span class="va">trend</span><span class="op">)</span></span>
<span class="r-in">  <span class="op">)</span> |&gt;</span>
<span class="r-in">  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">raw_delta</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/range.html" class="external-link">range</a></span><span class="op">(</span><span class="va">raw_delta</span><span class="op">)</span><span class="op">)</span> |&gt;</span>
<span class="r-in">  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="st">"pandoc"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> film    bo_domestic   bo_intl  headline                              raw_delta  trend  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -----  ------------  --------  -----------------------------------  ----------  -------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cars          244.1     217.9  $26.2M higher ($244.1M vs $217.9M)         26.2  higher </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coco          209.7     597.4  $387.7M lower ($209.7M vs $597.4M)       -387.7  lower  </span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Jake Riley.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

      </footer></div>

  


  

  </body></html>

